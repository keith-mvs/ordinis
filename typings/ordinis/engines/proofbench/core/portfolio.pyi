"""
This type stub file was generated by pyright.
"""

from datetime import datetime
from ordinis.domain.enums import OrderSide
from ordinis.domain.orders import Fill
from ordinis.domain.positions import Position

"""Portfolio management with position tracking and P&L calculation."""
class Portfolio:
    """Portfolio manager for backtesting.

    Tracks positions, cash, equity, and generates trade history.
    Provides mark-to-market updates and P&L calculation.
    """
    def __init__(self, initial_capital: float = ...) -> None:
        """Initialize portfolio.

        Args:
            initial_capital: Starting cash balance
        """
        ...
    
    @property
    def equity(self) -> float:
        """Get total equity (cash + positions).

        Returns:
            Current total equity
        """
        ...
    
    @property
    def total_pnl(self) -> float:
        """Get total P&L since inception.

        Returns:
            Total profit/loss
        """
        ...
    
    @property
    def total_pnl_pct(self) -> float:
        """Get total P&L as percentage.

        Returns:
            P&L percentage
        """
        ...
    
    @property
    def position_value(self) -> float:
        """Get total value of all positions.

        Returns:
            Sum of all position values
        """
        ...
    
    @property
    def num_positions(self) -> int:
        """Get number of open positions.

        Returns:
            Count of non-flat positions
        """
        ...
    
    def update_position(self, fill: Fill, timestamp: datetime): # -> None:
        """Update position based on fill.

        Args:
            fill: Fill to apply
            timestamp: Update timestamp
        """
        ...
    
    def update_prices(self, prices: dict[str, float], timestamp: datetime): # -> None:
        """Update all position prices (mark-to-market).

        Args:
            prices: Dictionary of symbol -> price
            timestamp: Update timestamp
        """
        ...
    
    def record_equity(self, timestamp: datetime): # -> None:
        """Record current equity for equity curve.

        Args:
            timestamp: Timestamp for recording
        """
        ...
    
    def get_position(self, symbol: str) -> Position | None:
        """Get position for a symbol.

        Args:
            symbol: Stock symbol

        Returns:
            Position or None if no position
        """
        ...
    
    def has_position(self, symbol: str) -> bool:
        """Check if portfolio has position in symbol.

        Args:
            symbol: Stock symbol

        Returns:
            True if position exists and is not flat
        """
        ...
    
    def can_trade(self, symbol: str, quantity: int, price: float, side: OrderSide) -> bool:
        """Check if portfolio can execute a trade.

        Args:
            symbol: Stock symbol
            quantity: Number of shares
            price: Price per share
            side: Buy or sell

        Returns:
            True if trade is possible
        """
        ...
    
    def get_summary(self) -> dict:
        """Get portfolio summary.

        Returns:
            Dictionary with portfolio metrics
        """
        ...
    


