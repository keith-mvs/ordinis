# Fibonacci ADX Strategy v1.3.0 Release Notes

**Release Date:** 2025-12-25  
**Previous Version:** 1.2.0

---

## Summary

Version 1.3.0 completes the high-profit enhancement roadmap with two major features: **ADX Slope Gating** and **Chandelier Exit** trailing stops. These additions enable the strategy to filter entries by trend strength momentum and capture extended moves via ATR-based trailing exits.

---

## New Features

### 1. ADX Slope Analysis & Gating

**Location:** `src/ordinis/engines/signalcore/models/adx_trend.py`

The `ADXTrendModel` now calculates ADX slope over a configurable lookback period and exposes trend acceleration metadata:

| Metadata Field | Type | Description |
|----------------|------|-------------|
| `adx_slope` | `float` | Change in ADX over `slope_lookback` periods |
| `trend_accelerating` | `bool` | True when `adx_slope > 0` |

**New Parameters:**
- `slope_lookback` (default: 5) â€” periods for slope calculation
- `slope_threshold` (default: 0.0) â€” minimum slope for `trend_accelerating=True`

**Strategy Integration:**
- `FibonacciADXStrategy` now accepts optional `require_slope_gating` parameter
- When enabled, entries require `trend_accelerating=True`
- Slope values included in `feature_contributions` for ML model training

### 2. Chandelier Exit Model

**Location:** `src/ordinis/engines/signalcore/models/chandelier_exit.py`

New exit model implementing the Chandelier Exit trailing stop methodology:

$$
\text{Chandelier}_{\text{long}} = \max_{n}(\text{High}) - \text{multiplier} \times \text{ATR}
$$

$$
\text{Chandelier}_{\text{short}} = \min_{n}(\text{Low}) + \text{multiplier} \times \text{ATR}
$$

**Parameters:**
- `atr_period` (default: 22) â€” ATR calculation period
- `atr_multiplier` (default: 3.0) â€” ATR multiplier for stop distance
- `lookback_period` (default: 22) â€” High/Low lookback for anchor

**Metadata Provided:**
| Field | Type | Description |
|-------|------|-------------|
| `chandelier_level` | `float` | Calculated stop level |
| `current_price` | `float` | Current close price |
| `distance_to_exit` | `float` | Distance to stop as percentage |
| `exit_triggered` | `bool` | True if stop has been breached |
| `atr_value` | `float` | Current ATR value |

**Usage:**
```python
from ordinis.engines.signalcore.models import ChandelierExitModel

model = ChandelierExitModel(
    position_direction="long",
    atr_period=22,
    atr_multiplier=3.0
)
signal = await model.generate(data, timestamp)
if signal.metadata["exit_triggered"]:
    # Execute exit
```

---

## Test Coverage

### New Test Suite

**File:** `docs/strategies/FIBONACCI_ADX/test_v12_features.py`

| Test Class | Tests | Status |
|------------|-------|--------|
| `TestADXSlopeCalculation` | 3 | âœ… Pass |
| `TestChandelierExitModel` | 6 | âœ… Pass |
| `TestFibonacciADXWithSlope` | 2 | âœ… Pass |

**Total:** 11 new tests, all passing

### Test Descriptions

1. **ADX Slope Tests:**
   - `test_adx_slope_in_metadata` â€” verifies slope value present
   - `test_trend_accelerating_boolean` â€” verifies acceleration flag
   - `test_slope_in_feature_contributions` â€” verifies ML integration

2. **Chandelier Exit Tests:**
   - `test_chandelier_level_calculated` â€” verifies level computation
   - `test_chandelier_hold_in_uptrend` â€” verifies hold behavior
   - `test_chandelier_exit_on_reversal` â€” verifies exit triggering
   - `test_chandelier_short_mode` â€” verifies short position mode
   - `test_distance_to_exit_calculated` â€” verifies distance metric
   - `test_calculate_stop_level_utility` â€” verifies static calculation method

3. **Strategy Integration Tests:**
   - `test_slope_gating_parameter_stored` â€” verifies config storage
   - `test_default_slope_gating_off` â€” verifies backward compatibility

---

## Backward Compatibility

All new features are **opt-in**:

- ADX slope gating disabled by default (`require_slope_gating=False`)
- Chandelier Exit is a separate model, not auto-enabled
- Existing strategy configurations continue to work unchanged

---

## Files Changed

| File | Change Type |
|------|-------------|
| `src/ordinis/engines/signalcore/models/adx_trend.py` | Modified |
| `src/ordinis/engines/signalcore/models/chandelier_exit.py` | **New** |
| `src/ordinis/engines/signalcore/models/__init__.py` | Modified |
| `src/ordinis/application/strategies/fibonacci_adx.py` | Modified |
| `docs/strategies/FIBONACCI_ADX/FIBONACCI_ADX.md` | Modified |
| `docs/strategies/FIBONACCI_ADX/analysis.md` | Modified |
| `docs/strategies/FIBONACCI_ADX/test_v12_features.py` | **New** |

---

## Remaining Roadmap Items

| Task | Priority | Status |
|------|----------|--------|
| Volume Profile Confirmation | Medium | ðŸ“‹ Planned |
| Fractal Swing Detection | Medium | ðŸ“‹ Planned |
| Multi-Timeframe Alignment | Low | ðŸ“‹ Planned |
| Pyramiding Logic | Low | ðŸ“‹ Planned |

---

## Usage Example

```python
from ordinis.application.strategies.fibonacci_adx import FibonacciADXStrategy
from ordinis.engines.signalcore.models import ChandelierExitModel

# Strategy with ADX slope gating enabled
strategy = FibonacciADXStrategy(
    name="fib-adx-v13",
    adx_threshold=25,
    require_slope_gating=True  # New in v1.3.0
)

# Chandelier Exit for position management
chandelier = ChandelierExitModel(
    position_direction="long",
    atr_period=22,
    atr_multiplier=3.0
)

# Generate signals
entry_signal = await strategy.generate_signal(data, timestamp)
if entry_signal.is_actionable():
    # ... enter position ...
    
    # Monitor with chandelier exit
    exit_signal = await chandelier.generate(data, timestamp)
    if exit_signal.metadata["exit_triggered"]:
        # Execute trailing stop exit
        pass
```

---

*Version 1.3.0 prepared by Ordinis Quantitative Team*
