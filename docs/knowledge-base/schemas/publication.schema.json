{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://intelligent-investor.io/schemas/publication.schema.json",
  "title": "Publication Metadata Schema",
  "description": "Schema for trading and finance publication metadata in the Knowledge Base",
  "type": "object",
  "required": ["id", "title", "authors", "publication_year", "domains", "source_type", "status"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^pub_[a-z0-9_]+$",
      "description": "Unique publication ID: pub_harris_trading_exchanges",
      "examples": ["pub_harris_trading_exchanges", "pub_lopez_de_prado_advances"]
    },
    "title": {
      "type": "string",
      "minLength": 1,
      "description": "Full title of the publication"
    },
    "subtitle": {
      "type": "string",
      "description": "Subtitle or alternative title"
    },
    "authors": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Author's full name"
          },
          "affiliation": {
            "type": "string",
            "description": "Academic or professional affiliation"
          }
        }
      },
      "description": "List of authors"
    },
    "publication_year": {
      "type": "integer",
      "minimum": 1900,
      "maximum": 2100,
      "description": "Year of publication"
    },
    "edition": {
      "type": "string",
      "description": "Edition information (e.g., '2nd Edition', 'v1.0')",
      "examples": ["2nd Edition", "3rd Edition", "Revised"]
    },
    "domains": {
      "type": "array",
      "items": {
        "type": "integer",
        "minimum": 1,
        "maximum": 9
      },
      "minItems": 1,
      "uniqueItems": true,
      "description": "Domain numbers 1-9 this publication covers"
    },
    "source_type": {
      "type": "string",
      "enum": ["textbook", "academic_paper", "industry_guide", "practitioner_book", "research_report"],
      "description": "Type of publication source"
    },
    "access": {
      "type": "object",
      "properties": {
        "format": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["pdf", "epub", "web", "hardcopy"]
          },
          "description": "Available formats"
        },
        "url": {
          "type": "string",
          "format": "uri",
          "description": "Primary access URL"
        },
        "doi": {
          "type": "string",
          "description": "Digital Object Identifier"
        },
        "isbn": {
          "type": "string",
          "description": "ISBN number"
        },
        "internal_path": {
          "type": "string",
          "description": "Path to local copy if available"
        }
      }
    },
    "summary": {
      "type": "string",
      "minLength": 50,
      "maxLength": 1000,
      "description": "2-4 sentence summary of key topics covered"
    },
    "key_concepts": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Primary concepts covered (for indexing and search)"
    },
    "target_audience": {
      "type": "string",
      "enum": ["beginner", "intermediate", "advanced", "institutional"],
      "description": "Intended audience level"
    },
    "practical_vs_theoretical": {
      "type": "number",
      "minimum": 0,
      "maximum": 1,
      "description": "0 = pure theory, 1 = pure practical application"
    },
    "citations": {
      "type": "integer",
      "minimum": 0,
      "description": "Number of academic citations (if available)"
    },
    "status": {
      "type": "string",
      "enum": ["indexed", "pending_review", "ingestion_in_progress", "archived"],
      "description": "Current status in the knowledge base"
    },
    "ingestion_metadata": {
      "type": "object",
      "properties": {
        "ingested_date": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp of ingestion"
        },
        "ingested_by": {
          "type": "string",
          "description": "User or system that ingested this publication"
        },
        "embedding_model": {
          "type": "string",
          "description": "Embedding model used (e.g., text-embedding-3-large)",
          "examples": ["text-embedding-3-large", "nomic-embed-text"]
        },
        "chunk_count": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of text chunks created for embedding"
        },
        "index_version": {
          "type": "string",
          "pattern": "^v\\d+\\.\\d+\\.\\d+$",
          "description": "Version of the indexing system"
        }
      }
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Additional tags for categorization and search"
    },
    "version": {
      "type": "string",
      "pattern": "^v\\d+\\.\\d+\\.\\d+$",
      "description": "Semantic version of this metadata record",
      "default": "v1.0.0"
    },
    "last_updated": {
      "type": "string",
      "format": "date-time",
      "description": "Last update timestamp for this metadata"
    }
  },
  "additionalProperties": false
}
